image: Visual Studio 2019
version: '3.1.0-build{build}'
init:
  - if %APPVEYOR_REPO_TAG%==true (appveyor UpdateBuild -Version "%APPVEYOR_BUILD_VERSION%")
skip_branch_with_pr: true
skip_tags: true
dotnet_csproj:
  patch: true
  file: '**\*.csproj;**\*.props'
  version: '{version}'
  package_version: '{version}'
configuration: Release
before_build:
  - appveyor-retry dotnet restore -v Minimal
build:
  parallel: true
  publish_nuget: true
  publish_nuget_symbols: true
  include_nuget_references: true
  verbosity: normal
deploy:
  - provider: NuGet
    api_key:
      secure: cZD/WgvVPXmCIrra1/N+WOb5QhrWBOef2ymP+QK7m+1DPvAr+KeJve0GtKe9dBQy
    on:
      branch: develop
  - provider: NuGet
    api_key:
      secure: cZD/WgvVPXmCIrra1/N+WOb5QhrWBOef2ymP+QK7m+1DPvAr+KeJve0GtKe9dBQy
    on:
      appveyor_repo_tag: true
  - provider: GitHub
    description: AppVeyor CI deployment
    auth_token:
      secure: 49h1/SXggw6sDLDix121vnZO1XeUqNJkKUDEwx+QdHQJzEJwO2bgRqOs6HPNDExh
    artifact: HawkAuthentication
    draft: false
    prerelease: false
    force_update: true
    on:
      appveyor_repo_tag: true
